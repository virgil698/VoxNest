# VoxNest 项目文档

欢迎来到VoxNest项目文档！VoxNest是一个基于**核心框架 + 扩展系统**架构的下一代CSM网络交流程序，采用前后端分离设计，具备强大的插件扩展能力。

## 🆕 最新开发进展

### 2025年9月版本亮点
- ✅ **统一配置管理** - 前后端设置统一到单一管理界面
- ✅ **扩展管理优化** - 实时状态反馈，防抖机制优化
- ✅ **时区功能完善** - 支持全球时区设置，安装时可配置
- ✅ **后端配置API** - 动态配置服务器参数，支持热更新
- ✅ **界面体验提升** - 统一设计语言，图标+文字风格
- ✅ **稳定性增强** - 修复热重载循环、表格重复Key等关键问题

### 开发状态
- 🟢 **核心框架** - 稳定运行，功能完善
- 🟢 **扩展系统** - 热插拔机制成熟，开发体验优化
- 🟢 **配置管理** - 统一管理界面，实时配置更新
- 🟡 **插件生态** - 基础插件完成，扩展插件开发中
- 🟡 **文档完善** - 核心文档完成，实例教程补充中

## 🚀 项目亮点

### 💡 创新的扩展框架
- **前端扩展系统**: 类 Astro Integration API 设计，支持生命周期钩子和槽位管理
- **动态加载**: 支持插件和主题的热插拔，无需重启应用
- **内置集成**: React、布局、样式、开发工具、路由等核心集成开箱即用
- **开发友好**: 丰富的调试工具和性能监控
- **热重载优化**: 防抖机制，避免频繁重载，提升开发体验

### 🎯 核心特性
- **最小化核心**: 轻量级核心框架，所有业务功能通过扩展实现
- **全栈扩展**: 前后端统一的扩展架构和API
- **主题系统**: CSS变量驱动的主题系统，支持深色模式和自定义主题
- **类型安全**: TypeScript + 完整的类型定义
- **统一配置**: 前后端配置统一管理，支持实时更新
- **全球化支持**: 完整的时区设置功能，支持多语言扩展

## 📚 文档目录

### 1. [项目总体规划](./01-项目总体规划.md)
- 项目概述和设计理念
- 核心框架与插件扩展架构
- 技术栈选择和开发阶段规划
- 项目里程碑和成功指标

### 2. [开发流程规范](./02-开发流程规范.md)
- 开发环境搭建指南
- Git工作流和提交规范
- 代码规范和质量标准

### 3. [插件系统架构设计](./03-插件系统架构设计.md) ⭐ **已更新**
- **前端扩展框架详细设计**：集成系统、槽位管理、内置集成详解
- **扩展发现与加载**：自动发现机制、清单格式、加载流程
- **前端插件系统实现**：框架初始化、槽位使用、开发示例
- 插件生命周期和接口定义
- 事件总线和通信机制
- 插件安全和性能优化

### 4. [核心功能模块设计](./04-核心功能模块设计.md) ⭐ **已更新**
- **认证授权模块实现**：JWT认证和权限控制
- **用户管理和内容管理**：完整的用户生命周期管理
- **扩展管理系统**：插件启用/禁用、实时状态反馈、热重载优化
- **配置管理系统**：统一的前后端配置API，支持实时更新
- **时区和国际化**：全球时区支持，多语言扩展框架
- 数据库设计和API规范

### 5. [插件开发指南](./05-插件开发指南.md) ⭐ **已更新**
- **前端扩展开发完整流程**：创建项目、入口文件、React组件开发
- **主题扩展开发**：主题创建、样式开发、配置集成
- **扩展测试与调试**：开发工具、单元测试、性能分析
- **扩展发布与分发**：打包脚本、版本管理
- 插件开发快速开始
- 内容插件和UI插件开发
- 数据库集成和事件处理

### 6. [扩展插件规划](./06-扩展插件规划.md)
- 插件分类体系和功能特性
- 核心功能、媒体、社交插件规划
- 插件开发路线图
- 插件生态建设和商业化策略

### 7. [技术实现方案](./07-技术实现方案.md) ⭐ **已更新**
- **扩展框架核心实现**：ExtensionFramework、SlotManager、React组件
- **扩展发现和加载实现**：ExtensionDiscovery、ExtensionLoader完整实现
- **最新技术栈**：React 18.3.1 + TypeScript 5.8.3 + Vite 6.0.2
- 整体技术架构和扩展系统架构
- 核心框架和数据库设计
- 性能优化、安全实现和部署方案

## 🚀 快速开始

### 环境要求
- .NET 9.0 SDK
- Node.js 18+ LTS
- PostgreSQL 15+
- Redis 7+ （非必须，插件提供对接）
- Visual Studio 2022 或 VS Code

### 本地开发
```bash
# 1. 克隆项目
git clone <repository-url>
cd VoxNest

# 2. 启动后端服务
cd VoxNest.Server
dotnet restore
dotnet run

# 3. 启动前端服务
cd ../voxnest.client
npm install
npm run dev
```

### Docker部署
```bash
# 使用Docker Compose一键启动
docker-compose up -d
```

## 🏗️ 项目架构

VoxNest采用**核心框架 + 扩展系统**的现代化架构：

### 整体架构
```
┌─────────────────────────────────────────────────────────┐
│                   前端扩展框架                           │
│  Extension Framework │ Slot Manager │ Integration API   │
├─────────────────────────────────────────────────────────┤
│                   React 应用层                          │
│  React 19 + TypeScript 5.0 + Vite + Ant Design        │
├─────────────────────────────────────────────────────────┤
│                   API网关层                             │
│  ASP.NET Core 9.0 + 配置管理API + 扩展文件服务API      │
├─────────────────────────────────────────────────────────┤
│                   核心框架层                            │
│  用户管理 + 内容管理 + 扩展管理 + 配置管理              │
├─────────────────────────────────────────────────────────┤
│                   扩展生态层                            │
│  插件 (Plugins) + 主题 (Themes) + 集成 (Integrations) │
├─────────────────────────────────────────────────────────┤
│                   配置管理层                            │
│  统一配置API + YAML配置 + 实时配置更新                 │
├─────────────────────────────────────────────────────────┤
│                   数据存储层                            │
│  PostgreSQL / MySQL + Redis + Elasticsearch（扩展）    │
└─────────────────────────────────────────────────────────┘
```

### 前端扩展架构
```
┌─────────────────────────────────────────┐
│          槽位渲染 (Slot Rendering)       │
├─────────────────────────────────────────┤
│        组件注册 (Component Registry)    │  
├─────────────────────────────────────────┤
│         集成管理 (Integration Manager)   │
├─────────────────────────────────────────┤
│           内置集成 (Built-in)            │
│  React │ Layout │ Style │ DevTools      │
├─────────────────────────────────────────┤
│         扩展发现和加载                   │
│  ExtensionDiscovery │ ExtensionLoader   │
└─────────────────────────────────────────┘
```

## 🔧 核心特性

### 🎯 最小化核心
- 轻量级核心框架，仅包含必要基础功能
- 所有业务功能通过扩展实现
- 高性能和稳定性保障

### 🔌 强大的扩展系统
- **前端扩展框架**: 类 Astro Integration API 设计
- **生命周期钩子**: framework:ready、components:ready、app:start 等
- **槽位系统**: 支持优先级、条件渲染、动态注册
- **热插拔**: 支持插件和主题的运行时加载/卸载

### 🎨 现代化主题系统
- CSS变量驱动，支持深色模式
- 动态主题切换，无需刷新页面
- 完整的设计令牌体系
- 响应式和无障碍支持

### 🛠️ 开发者友好
- TypeScript 完整类型支持
- 丰富的开发调试工具（Ctrl+Shift+D/S）
- 性能监控和分析工具
- 完整的测试框架支持

### 🛡️ 安全可靠
- 扩展沙箱隔离机制
- 细粒度权限控制
- API访问控制和验证
- 安全代码审查流程

### 📈 高性能
- 扩展按需加载
- 多级缓存策略
- 数据库查询优化
- 异步化处理架构

## 🎯 扩展开发快速示例

### 创建一个简单的插件扩展

```typescript
// public/extensions/plugins/my-widget/index.js
import { createComponentIntegration } from '@voxnest/extension-framework';

const MyWidget = () => {
  return (
    <div className="my-widget">
      <h3>我的插件组件</h3>
      <p>这是一个简单的插件示例</p>
    </div>
  );
};

export default createComponentIntegration('my-widget', [
  {
    slotId: 'layout:sidebar.top',
    component: MyWidget,
    priority: 10
  }
]);
```

### 创建主题扩展

```json
// public/extensions/themes/my-theme/manifest.json
{
  "id": "my-theme",
  "name": "我的主题",
  "type": "theme",
  "styles": ["theme.css"],
  "config": {
    "variables": {
      "--voxnest-primary": "#6366f1",
      "--voxnest-bg": "#ffffff"
    }
  }
}
```

```css
/* public/extensions/themes/my-theme/theme.css */
:root {
  --voxnest-primary: #6366f1;
  --voxnest-bg: #ffffff;
}

[data-theme="dark"] {
  --voxnest-primary: #8b5cf6;
  --voxnest-bg: #1a1a1a;
}
```

### 开发调试

```typescript
// 开发模式下可用的调试命令
// 按 Ctrl+Shift+D 打开调试面板
// 按 Ctrl+Shift+S 查看框架状态

// 浏览器控制台
window.__VOXNEST_FRAMEWORK__.getStats()  // 查看框架统计
window.__DEBUG__.listSlots()              // 查看所有槽位
window.__DEBUG__.listIntegrations()       // 查看所有集成
```

## 🤝 贡献指南

### 参与方式
1. **核心开发**: 参与核心框架开发
2. **插件开发**: 开发业务功能插件
3. **文档完善**: 改进项目文档
4. **测试反馈**: 提供测试和反馈

### 开发流程
1. Fork项目到个人仓库
2. 创建功能分支 `feature/your-feature`
3. 提交代码并创建Pull Request
4. 代码审查通过后合并

### 代码规范
- 遵循项目代码规范
- 编写单元测试
- 更新相关文档
- 通过CI检查

## 📞 联系我们

- **项目主页**: [GitHub Repository]
- **问题反馈**: [GitHub Issues]
- **讨论交流**: [GitHub Discussions]
- **邮箱联系**: voxnest@example.com

## 📄 许可证

本项目采用 [MIT License](../LICENSE) 开源协议。

## 🙏 致谢

感谢所有为VoxNest项目做出贡献的开发者和社区成员！

---

**VoxNest** - 下一代CSM网络交流程序，让内容创作更简单，让社区交流更精彩！
